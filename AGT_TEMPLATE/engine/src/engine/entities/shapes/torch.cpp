#include "pch.h"
#include "table.h"
#include <engine.h>

engine::torch::torch()
{

	//Vertices for the (-x,z) table leg
	std::vector<mesh::vertex> torch_vertices
	{
		//BASE
		//Front (wall facing)
		{ {-1,0,2},		{0,0,1},		{0 ,0} },
		{ {1,0,2},		{0,0,1},		{1 ,0} },
		{ {1,2,2},		{0,0,1},		{1 ,1} },
		{ {-1,2,2},		{0,0,1},		{0 ,1} },

		//Right
		{ {1,0,2},		{1,0,0},		{0 ,0} },
		{ {1,2,-2},		{1,0,0},		{1 ,0} },
		{ {1,4,-2},		{1,0,0},		{1 ,1} },
		{ {1,2,2},		{1,0,0},		{0 ,1} },

		//Back
		{ {1,2,-2},		{0,0,-1},		{0 ,0} },
		{ {-1,2,-2},	{0,0,-1},		{1 ,0} },
		{ {-1,4,-2},	{0,0,-1},		{1 ,1} },
		{ {1,4,-2},		{0,0,-1},		{0 ,1} },

		//Left
		{ {-1,2,-2},	{-1,0,0},		{0 ,0} },
		{ {-1,0,2},		{-1,0,0},		{1 ,0} },
		{ {-1,2,2},		{-1,0,0},		{1 ,1} },
		{ {-1,4,-2},	{-1,0,0},		{0 ,1} },

		//Top
		{ {-1,2,2},		{0,3,-2},		{0 ,0} },
		{ {1,2,2},		{0,3,-2},		{1 ,0} },
		{ {1,4,-2},		{0,3,-2},		{1 ,1} },
		{ {-1,4,-2},	{0,3,-2},		{0 ,1} },

		//Bottom
		{ {-1,2,-2},	{0,-3,2},		{0 ,0} },
		{ {1,2,-2},		{0,-3,2},		{1 ,0} },
		{ {1,0,2},		{0,-3,2},		{1 ,1} },
		{ {-1,0,2},		{0,-3,2},		{0 ,1} },

		//HOLDER
		//Front (wall facing)
		{ {-1,4,-2},	{0,0,1},		{0 ,0} },
		{ {1,4,-2},		{0,0,1},		{1 ,0} },
		{ {1,6,-2},		{0,0,1},		{1 ,1} },
		{ {-1,6,-2},	{0,0,1},		{0 ,1} },

		//Right
		{ {1,2,-2},		{1,0,0},		{0 ,0} },
		{ {1,4,-4},		{1,0,0},		{1 ,0} },
		{ {1,6,-4},		{1,0,0},		{1 ,1} },
		{ {1,6,-2},		{1,0,0},		{0 ,1} },

		//Back-slant
		{ {1,2,-2},		{0,-3,-4},		{0 ,0} },
		{ {-1,2,-2},	{0,-3,-4},		{1 ,0} },
		{ {-1,4,-4},	{0,-3,-4},		{1 ,1} },
		{ {1,4,-4},		{0,-3,-4},		{0 ,1} },

		//Back-straight
		{ {1,4,-4},		{0,0,-1},		{0 ,0} },
		{ {-1,4,-4},	{0,0,-1},		{1 ,0} },
		{ {-1,6,-4},	{0,0,-1},		{1 ,1} },
		{ {1,6,-4},		{0,0,-1},		{0 ,1} },

		//Left
		{ {-1,4,-4},	{-1,0,0},		{0 ,0} },
		{ {-1,2,-2},	{-1,0,0},		{1 ,0} },
		{ {-1,6,-2},	{-1,0,0},		{1 ,1} },
		{ {-1,6,-4},	{-1,0,0},		{0 ,1} },

		//Top
		{ {-1,6,-2},	{0,1,0},		{0 ,0} },
		{ {1,6,-2},		{0,1,0},		{1 ,0} },
		{ {1,6,-4},		{0,1,0},		{1 ,1} },
		{ {-1,6,-4},	{0,1,0},		{0 ,1} },

	};

	//FINAL INDICES MUST BE PASSED AS CONST!!!!!!!!!!!!!!!!!!!!!!!!!!
	std::vector<uint32_t> torch_indices
	{
		 0,  1,  2,		 0,  2,  3,  //front
		 4,  5,  6,		 4,  6,  7,  //right
		 8,  9, 10,		 8, 10, 11,  //back
		12, 13, 14,		12, 14, 15,  //left
		16, 17, 18,		16, 18, 19,  //upper
		20, 21, 22,		20, 22, 23,  //bottom

		24, 25, 26,		24, 26, 27,  //front
		28, 29, 30,		28, 30, 31,  //right
		32, 33, 34,		32, 34, 35,  //back
		36, 37, 38,		36, 38, 39,  //left
		40, 41, 42,		40, 42, 43,  //upper
		44, 45, 46,		44, 46, 47   //bottom

	};

	m_mesh = engine::mesh::create(torch_vertices, torch_indices);


}

engine::torch::~torch(){}

engine::ref<engine::torch> engine::torch::create()
{
	return std::make_shared<engine::torch>();
}
