#include "pch.h"
#include "tetrahedron.h"
#include <engine.h>

engine::potion::potion()
{

	std::vector<mesh::vertex> potion_vertices
	{
		//front
		// position		normal			tex coord       
		{ {-4,0,2},		{0,0,1},		{0 ,0} },
		{ {4,0,2},		{0,0,1},		{1 ,0} },
		{ {2,3,2},		{0,0,1},		{0.75 ,1} },
		{ {-2,3,2},		{0,0,1},		{0.25 ,1} },

		//right
		{ {4,0,2},		{3,2,0},		{0 ,0} },
		{ {4,0,-2},		{3,2,0},		{1 ,0} },
		{ {2,3,-2},		{3,2,0},		{1 ,1} },
		{ {2,3,2},		{3,2,0},		{0 ,1} },

		//back
		{ {4,0,-2},		{0,0,-1},		{0 ,0} },
		{ {-4,0,-2},	{0,0,-1},		{1 ,0} },
		{ {-2,3,-2},	{0,0,-1},		{0.75 ,1} },
		{ {2,3,-2},		{0,0,-1},		{0.25 ,1} },

		//left
		{ {-4,0,-2},	{-3,2,0},		{0 ,0} },
		{ {-4,0,2},		{-3,2,0},		{1 ,0} },
		{ {-2,3,2},		{-3,2,0},		{1 ,1} },
		{ {-2,3,-2},	{-3,2,0},		{0 ,1} },

		//top
		{ {-2,3,2},		{0,1,0},		{0 ,0} },
		{ {2,3,2},		{0,1,0},		{1 ,0} },
		{ {2,3,-2},		{0,1,0},		{1 ,1} },
		{ {-2,3,-2},	{0,1,0},		{0 ,1} },

		//bottom
		{ {-4,0,-2},	{0,-1,0},		{0 ,0} },
		{ {4,0,-2},		{0,-1,0},		{1 ,0} },
		{ {4,0,2},		{0,-1,0},		{1 ,1} },
		{ {-4,0,2},		{0,-1,0},		{0 ,1} },

		//CAP VECTORS

		//front
		{ {-1,3,1},		{ 0,0,1},		{0 ,0} },
		{ {1,3,1},		{ 0,0,1},		{1 ,0} },
		{ {1,4,1},		{ 0,0,1},		{1 ,1} },
		{ {-1,4,1},		{ 0,0,1},		{0 ,1} },

		//right
		{ {1,3,1},		{ 1,0,0},		{0 ,0} },
		{ {1,3,-1},		{ 1,0,0},		{1 ,0} },
		{ {1,4,-1},		{ 1,0,0},		{1 ,1} },
		{ {1,4,1},		{ 1,0,0},		{0 ,1} },

		//back
		{ {1,3,-1},		{ 0,0,-1},		{0 ,0} },
		{ {-1,3,-1},	{ 0,0,-1},		{1 ,0} },
		{ {-1,4,-1},	{ 0,0,-1},		{1 ,1} },
		{ {1,4,-1},		{ 0,0,-1},		{0 ,1} },

		//left
		{ {-1,3,-1},	{ -1,0,0},		{0 ,0} },
		{ {-1,3,1},		{ -1,0,0},		{1 ,0} },
		{ {-1,4,1},		{ -1,0,0},		{1 ,1} },
		{ {-1,4,-1},	{ -1,0,0},		{0 ,1} },

		//top
		{ {-1,4,1},		{ 0,1,0},		{0 ,0} },
		{ {1,4,1},		{ 0,1,0},		{1 ,0} },
		{ {1,4,-1},		{ 0,1,0},		{1 ,1} },
		{ {-1,4,-1},	{ 0,1,0},		{0 ,1} },

		//bottom
		{ {-1,3,-1},	{ 0,-1,0},		{0 ,0} },
		{ {1,3,-1},		{ 0,-1,0},		{1 ,0} },
		{ {1,3,1},		{ 0,-1,0},		{1 ,1} },
		{ {-1,3,1},		{ 0,-1,0},		{0 ,1} },
	};

	const std::vector<uint32_t> potion_indices
	{
		 0,  1,  2,		 0,  2,  3,  //front
		 4,  5,  6,		 4,  6,  7,  //right
		 8,  9, 10,		 8, 10, 11,  //back
		12, 13, 14,		12, 14, 15,  //left
		16, 17, 18,		16, 18, 19,  //upper
		20, 21, 22,		20, 22, 23,   //bottom

		//CAP INDICES
		24, 25, 26,		24, 26, 27,  //front
		28, 29, 30,		28, 30, 31,  //right
		32, 33, 34,		32,	34, 35,  //back
		36, 37, 38,		36, 38, 39,  //left
		40, 41, 42,		40, 42, 43,  //upper
		44, 45, 46,		44, 46, 47,   //bottom

	};


	m_mesh = engine::mesh::create(potion_vertices, potion_indices);
	
}

engine::potion::~potion() {}

engine::ref<engine::potion> engine::potion::create()
{
	return std::make_shared<engine::potion>();
}